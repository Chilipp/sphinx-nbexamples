language: python
python:
  - "3.4"
  - "3.5"
# sudo is required for installing pandoc
sudo: required
env:
  - SPHINX_VERSION=1.3 NBFORMAT_VERSION=4.0 NBCONVERT_VERSION=4.0
  - SPHINX_VERSION=1.3 NBFORMAT_VERSION=4.0 NBCONVERT_VERSION=4.1
  - SPHINX_VERSION=1.3 NBFORMAT_VERSION=4.0 NBCONVERT_VERSION=4.2
  - SPHINX_VERSION=1.3 NBFORMAT_VERSION=4.1 NBCONVERT_VERSION=4.0
  - SPHINX_VERSION=1.3 NBFORMAT_VERSION=4.1 NBCONVERT_VERSION=4.1
  - SPHINX_VERSION=1.3 NBFORMAT_VERSION=4.1 NBCONVERT_VERSION=4.2
  - SPHINX_VERSION=1.4 NBFORMAT_VERSION=4.0 NBCONVERT_VERSION=4.0
  - SPHINX_VERSION=1.4 NBFORMAT_VERSION=4.0 NBCONVERT_VERSION=4.1
  - SPHINX_VERSION=1.4 NBFORMAT_VERSION=4.0 NBCONVERT_VERSION=4.2
  - SPHINX_VERSION=1.4 NBFORMAT_VERSION=4.1 NBCONVERT_VERSION=4.0
  - SPHINX_VERSION=1.4 NBFORMAT_VERSION=4.1 NBCONVERT_VERSION=4.1
  - SPHINX_VERSION=1.4 NBFORMAT_VERSION=4.1 NBCONVERT_VERSION=4.2
install:
  # install pandoc
  - 'wget https://github.com/jgm/pandoc/releases/download/1.17.2/pandoc-1.17.2-1-amd64.deb'
  - dpkg -i pandoc-1.17.2-1-amd64.deb
  - sudo apt-get install matplotlib
  - pip install jupyter
  - pip install coveralls
  - pip install sphinx==${SPHINX_VERSION}
  - pip install nbconvert==${NBCONVERT_VERSION}
  - pip install nbconvert==${NBFORMAT_VERSION}
  - pip install ipython
  - python setup.py install

script:
  - coverage run --source=sphinx_nbexamples setup.py pytest

after_success:
  coveralls
